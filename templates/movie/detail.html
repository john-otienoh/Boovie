{% extends "base.html" %}

{% block title %}{{ movie.title }} | Movie Details{% endblock %}

{% block content %}
<div class="container py-4">

    <!-- Back Button -->
    <a href="{% url 'movie:home' %}" class="btn btn-outline-secondary mb-3">
        ‚Üê Back to Movies
    </a>

    <div class="row">
        <!-- Poster -->
        <div class="col-md-4">
            {% if movie.poster_image %}
                <img src="{{ movie.poster_image.url }}" class="img-fluid rounded shadow" alt="{{ movie.title }}">
            {% else %}
                <img src="https://via.placeholder.com/400x600?text=No+Image"
                     class="img-fluid rounded shadow"
                     alt="No Poster">
            {% endif %}
        </div>

        <!-- Movie Info -->
        <div class="col-md-8">
            <h2 class="fw-bold mb-3">{{ movie.title }}</h2>

            <!-- Status Badge -->
            {% if movie.status == 'now_showing' %}
                <span class="badge bg-success">Now Showing</span>
            {% elif movie.status == 'coming_soon' %}
                <span class="badge bg-warning text-dark">Coming Soon</span>
            {% else %}
                <span class="badge bg-secondary">Archived</span>
            {% endif %}

            <p class="mt-3 text-muted">{{ movie.description }}</p>

            <ul class="list-group mb-4">
                <li class="list-group-item">
                    <strong>Genre:</strong>
                    {% for g in movie.genre.all %}
                        <span class="badge bg-primary">{{ g.name }}</span>
                    {% empty %}
                        <span class="text-muted">No genre info</span>
                    {% endfor %}
                </li>

                <li class="list-group-item">
                    <strong>Duration:</strong> {{ movie.duration }} minutes
                </li>

                <li class="list-group-item">
                    <strong>Release Date:</strong> {{ movie.release_date }}
                </li>

                <li class="list-group-item">
                    <strong>Language:</strong> {{ movie.language }}
                </li>

                <li class="list-group-item">
                    <strong>Age Rating:</strong> 
                    <span class="badge bg-dark">{{ movie.get_age_rating_display }}</span>
                </li>
            </ul>

            <!-- Book Tickets Button -->
            {% if movie.status == "now_showing" %}
                <a href="#" class="btn btn-primary btn-lg">
                    üéü Book Tickets
                </a>
            {% else %}
                <button class="btn btn-secondary btn-lg" disabled>
                    Booking Unavailable
                </button>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
